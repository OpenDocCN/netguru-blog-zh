<html>
<head>
<title>Gatsby.js – a Better Way to Create Static Websites</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Gatsby . js——创建静态网站的更好方法</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/gatsby.js-a-better-way-to-create-static-websites#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/gatsby.js-a-better-way-to-create-static-websites#0001-01-01</a></blockquote><div><span><div class="blog-post__lead h3"><p>如果你已经在前端行业工作了几年，你可能还记得使用普通的HTML、CSS和JavaScript(我想还有少量的jQuery)创建网站是什么样子的。如果你这样做了，你还记得作为前端开发人员的痛苦——处理网页排版的复杂性，努力进行图像优化，自己为各种屏幕分辨率准备合适的图像尺寸。想象一下你在任务上浪费了多少时间。</p></div><p>幸运的是，前端开发的状态已经得到了很大的改善，每年我们都会获得越来越多的工具来帮助我们创建更好、更快、更高性能的网站。其中一个工具是Gatsby . js——一个现代的<a href="/web/20221007082346/https://www.netguru.com/blog/what-are-static-site-generators" rel="noopener" target="_blank">静态站点生成器</a>,基于已知的广受欢迎的React。</p>
<p>但是静态站点生成器到底是什么——你可能会问。嗯，这是一个工具，让你创建网站的基础上，静态文件，在简单和愉快的开发方式。“静态”意味着您的网站中不会有任何动态加载的内容。一旦你建立并部署了你的网站，它就保持不变，你不能通过CMS或API来改变它。不过，您可以使用CMS来更改内容，这将触发新的构建，并交换已经部署在服务器上的内容。结果，你得到了简单的HTML/CSS/js站点，它是轻量级的，非常容易托管。</p>
<p>有了Gatsby，您可以轻松处理您的项目复杂性，因为您可以使用React组件，当谈到前端项目的可伸缩性时，这些组件简直太棒了。此外，没有必要担心诸如排版，复杂的风格，代码的可重用性，图像优化等等！别说了——来吧，我给你看些代码！</p>
<h3><span>设置</span></h3>
<p>要开始Gatsby之旅，您只需将gatsby-cli作为一个全局包安装，并使用它创建一个新项目。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/eAnBjIGZoSonE8zW-r4d2tlny08EOl7NNO3R71Mtj_c5IOFkH7Ucrsjz1aufUP9D2UPv6k4gAekPBbScYNBbrpNOcCIoLMBx80SmmgdUeUoDPR-kwIR8dD3XM8bbUYBALUiYttl0G0PYaVdR6w 641w, http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/eAnBjIGZoSonE8zW-r4d2tlny08EOl7NNO3R71Mtj_c5IOFkH7Ucrsjz1aufUP9D2UPv6k4gAekPBbScYNBbrpNOcCIoLMBx80SmmgdUeUoDPR-kwIR8dD3XM8bbUYBALUiYttl0G0PYaVdR6w 1282w" src="../Images/4d79cb6577a725c39ba87ac405efe745.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/eAnBjIGZoSonE8zW-r4d2tlny08EOl7NNO3R71Mtj_c5IOFkH7Ucrsjz1aufUP9D2UPv6k4gAekPBbScYNBbrpNOcCIoLMBx80SmmgdUeUoDPR-kwIR8dD3XM8bbUYBALUiYttl0G0PYaVdR6w"/>
  </figure><p/>
<br/>
<p>它将创建一个带有索引页和404的简单样板文件。从现在开始，您可以通过简单地添加其他页面来创建自己的页面。js文件放入“pages”文件夹。你可能会问如何为他们提供一个合适的路线？只需使用Gatsby链接组件，并将文件名传递到“to”属性中。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh3.googleusercontent.com/YtM9VHmntv_2hGvv6S_ahix8DgYYgF34ynYPvuLyKlw_SdszkekqPBoPgQM3B_UMxh5Fvw524t3-dj_nLQwi1qbrssVrSFwreBpLe67fuBv0Ke-N2esHQnVAyoAUiVteefvRudfG 624w, http://web.archive.org/web/20221007082346im_/https://lh3.googleusercontent.com/YtM9VHmntv_2hGvv6S_ahix8DgYYgF34ynYPvuLyKlw_SdszkekqPBoPgQM3B_UMxh5Fvw524t3-dj_nLQwi1qbrssVrSFwreBpLe67fuBv0Ke-N2esHQnVAyoAUiVteefvRudfG 1248w" src="../Images/c4b462e20ac779d218fd15d4864bf465.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh3.googleusercontent.com/YtM9VHmntv_2hGvv6S_ahix8DgYYgF34ynYPvuLyKlw_SdszkekqPBoPgQM3B_UMxh5Fvw524t3-dj_nLQwi1qbrssVrSFwreBpLe67fuBv0Ke-N2esHQnVAyoAUiVteefvRudfG"/>
  </figure><p/>
<p>我们不会太深入，因为我有更令人兴奋的东西给你看。毕竟可以随时查文档，写的真的很好。你可以在这里查看。</p>
<h2>插件</h2>
<p>盖茨比的力量在于插件。这些小代码将节省你在第一段提到的所有重复性任务上的时间。检查盖茨比的插件目录-https://www.gatsbyjs.org/plugins/。基本上什么都有插件！当你完成设置后(只需要几分钟)，你就可以进入更令人兴奋的部分，那就是给你的网站添加适当的插件，这样它就可以利用现代前端工具的真正力量。ESLint、Styled Components、Typography.js唾手可得。只需将它们安装到您的存储库中，并在gatsby-config.js文件中声明它们。</p>
<p>如果你仍然不相信用Gatsby开发site真的很有趣，看看Dan Abramov是怎么说的。</p>
<br/><br/><br/>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh3.googleusercontent.com/8BHPY15wPD64IOnIBqGQGO0HOvOIB7K2CFN4vFiLRRqGJeDdoB4wGxCsL1xgvsz0cJUS3OPXD7olE5gjp5_g8T1W0qCCkams-lwTIha8ltCfCeFDjx0HAB9BBYI5c9wJOQynR1QuEZ7eI4HjAQ 641w, http://web.archive.org/web/20221007082346im_/https://lh3.googleusercontent.com/8BHPY15wPD64IOnIBqGQGO0HOvOIB7K2CFN4vFiLRRqGJeDdoB4wGxCsL1xgvsz0cJUS3OPXD7olE5gjp5_g8T1W0qCCkams-lwTIha8ltCfCeFDjx0HAB9BBYI5c9wJOQynR1QuEZ7eI4HjAQ 1282w" src="../Images/e2369b00cb851164f0d7d43f0ef22057.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh3.googleusercontent.com/8BHPY15wPD64IOnIBqGQGO0HOvOIB7K2CFN4vFiLRRqGJeDdoB4wGxCsL1xgvsz0cJUS3OPXD7olE5gjp5_g8T1W0qCCkams-lwTIha8ltCfCeFDjx0HAB9BBYI5c9wJOQynR1QuEZ7eI4HjAQ"/>
  </figure><p/>
<br/>
<h3><span>处理图像最聪明的方法</span></h3>
<p>我想在这里多探讨一点的是管理你的视觉资产。对于开发人员来说，处理多个。jpg和。具有适当尺寸、大小等的png。Gatsby似乎减轻了这种压力，它让您可以只加载一个大文件，这个文件在构建期间会被压缩。它还允许您使用同一图像的多个版本创建sourceset，以便每个设备只能下载一个适合自己的最佳大小。基本设置应该如下所示:</p>
<p>首先，我们需要设置我们的gatsby-config.js，以便它能够解析图像文件。得益于此，我们将能够创建GraphQL查询。sharp transformer插件将允许我们在图像上应用复杂的操作。</p>
<p> </p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://www.netguru.com/hs-fs/hubfs/configgatsby.jpg?width=700&amp;name=configgatsby.jpg 700w, http://web.archive.org/web/20221007082346im_/https://www.netguru.com/hs-fs/hubfs/configgatsby.jpg?width=2016&amp;name=configgatsby.jpg 2016w" src="../Images/d0d4ded1cac5582f2b415d06065e18a1.png" alt="configgatsby" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://www.netguru.com/hs-fs/hubfs/configgatsby.jpg?width=700&amp;name=configgatsby.jpg"/>
  </figure><p/>
<p>现在，让我们添加一个图像到我们的资产/图像文件夹。之后，让我们进入index.js页面，在这里我们可以编写第一个GraphQL查询。我们的图像文件名是winter.jpg，所以它很简单，但是如果这个名字像background-image-winter-2x.jpg一样复杂，那么我们的正则表达式就派上用场了，因为winter正则表达式只要添加一些特殊的符号就可以解决这个问题。不要忘记超级酷的imageSharp功能，它可以让你对你的文件做一些魔术。流体属性允许您创建具有最大高度和宽度的响应图像，并且–您可以通过设置质量(从0到100)轻松压缩文件。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/85FUmEuDRA9dlFVWHvCYoZoxGGVg1B_tjmOiRvEhux_j3Nz-bJdUesONWKO2_BdHDi0--ZKIyoWWPyFE1VlSUvyYMWOJPkT8Bi1MpAF2v1jIo_w-rkVo7q1PAGCGr4hB5j3pwf6p1zUXYXwLZA 641w, http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/85FUmEuDRA9dlFVWHvCYoZoxGGVg1B_tjmOiRvEhux_j3Nz-bJdUesONWKO2_BdHDi0--ZKIyoWWPyFE1VlSUvyYMWOJPkT8Bi1MpAF2v1jIo_w-rkVo7q1PAGCGr4hB5j3pwf6p1zUXYXwLZA 1282w" src="../Images/074fc8c512be53ed2e70c462eaa10819.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/85FUmEuDRA9dlFVWHvCYoZoxGGVg1B_tjmOiRvEhux_j3Nz-bJdUesONWKO2_BdHDi0--ZKIyoWWPyFE1VlSUvyYMWOJPkT8Bi1MpAF2v1jIo_w-rkVo7q1PAGCGr4hB5j3pwf6p1zUXYXwLZA"/>
  </figure><p/>
<br/>
<p>之后，在我们的Gatsby控制台(如果它运行的话)中，我们将能够看到，gatsby-cli正在为我们的源集压缩和创建多个版本。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/oQoC-XsHDkML_R-6KgrZ3TqdH7cBxBqCcHyqmOg7C2qEOqHa-40tFxIylKhHyn9g2tOTOT0c1YdA55I0aDxJEqJSWwYYbtk4L8LoYf55VrhRsR8WwSeMW3DFI8eHWRI-ryW5p-A6pXaYllurXg 641w, http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/oQoC-XsHDkML_R-6KgrZ3TqdH7cBxBqCcHyqmOg7C2qEOqHa-40tFxIylKhHyn9g2tOTOT0c1YdA55I0aDxJEqJSWwYYbtk4L8LoYf55VrhRsR8WwSeMW3DFI8eHWRI-ryW5p-A6pXaYllurXg 1282w" src="../Images/5e22b12aa16532a234b16e3ed428b589.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh5.googleusercontent.com/oQoC-XsHDkML_R-6KgrZ3TqdH7cBxBqCcHyqmOg7C2qEOqHa-40tFxIylKhHyn9g2tOTOT0c1YdA55I0aDxJEqJSWwYYbtk4L8LoYf55VrhRsR8WwSeMW3DFI8eHWRI-ryW5p-A6pXaYllurXg"/>
  </figure><p/>
<br/>
<p>接下来，我们需要将数据属性析构到我们的IndexPage组件中——从这个属性中，我们将能够提取转换后的图像。当GraphQL查询出现在组件文件中时，它是Gatsby自动提供的一个属性。在这种情况下，我们从查询中获取srcSet，这样我们就可以将它应用到简单的<img/>标记中。看看这个:</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh6.googleusercontent.com/2yyjJLpH7mQJ1AHJVQrT83JIrOkg7YOoVS9ucBXbq5XUySqnjNLmsx98GAdXx9RJZAiFQUCkKt7bTsaCgAhSY6PY38tVkBASTnSnQKMoI1iai8d8oTu4k-HW2qybrKnrF6yco593d5Z4fAPDHA 641w, http://web.archive.org/web/20221007082346im_/https://lh6.googleusercontent.com/2yyjJLpH7mQJ1AHJVQrT83JIrOkg7YOoVS9ucBXbq5XUySqnjNLmsx98GAdXx9RJZAiFQUCkKt7bTsaCgAhSY6PY38tVkBASTnSnQKMoI1iai8d8oTu4k-HW2qybrKnrF6yco593d5Z4fAPDHA 1282w" src="../Images/e7809851699018b9c87367d0c9cf1e53.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh6.googleusercontent.com/2yyjJLpH7mQJ1AHJVQrT83JIrOkg7YOoVS9ucBXbq5XUySqnjNLmsx98GAdXx9RJZAiFQUCkKt7bTsaCgAhSY6PY38tVkBASTnSnQKMoI1iai8d8oTu4k-HW2qybrKnrF6yco593d5Z4fAPDHA"/>
  </figure><p/>
<br/>
<p>我们到了。我们的图像显示在屏幕上，并通过加载最佳尺寸的文件来调整大小。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh6.googleusercontent.com/tFQp7dIOlY0uan16AOlr782-AS-Knrp89XhWj5uh75dy9wnSxwAtjJpLMEV6dGPKMfAY-HiyQo1RoK5opxj9AwYzKUUBkXObU8LFo4VcPcf1FtgxuCGU4U21jgMkL_aXdfMNlau5GrctN3Bncw 641w, http://web.archive.org/web/20221007082346im_/https://lh6.googleusercontent.com/tFQp7dIOlY0uan16AOlr782-AS-Knrp89XhWj5uh75dy9wnSxwAtjJpLMEV6dGPKMfAY-HiyQo1RoK5opxj9AwYzKUUBkXObU8LFo4VcPcf1FtgxuCGU4U21jgMkL_aXdfMNlau5GrctN3Bncw 1282w" src="../Images/fc722b6e64b9b25f5efa6a683b1dc118.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh6.googleusercontent.com/tFQp7dIOlY0uan16AOlr782-AS-Knrp89XhWj5uh75dy9wnSxwAtjJpLMEV6dGPKMfAY-HiyQo1RoK5opxj9AwYzKUUBkXObU8LFo4VcPcf1FtgxuCGU4U21jgMkL_aXdfMNlau5GrctN3Bncw"/>
  </figure><p/>
<br/>
<p>更酷的是，我们可以忘记srcSet和<img/>标记，使用gatsby-image组件，它可以利用sharp image transformer提供的功能。我们收到的不是简单的srcSet字符串，而是GatsbyImageSharpFluid对象，它以base64编码图像——现在它100%响应，甚至比srcSet更智能。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007082346im_/https://lh4.googleusercontent.com/HGAdRyh_UC3EKRjQol_JHGwbYxjz5moC-she7n5i8_LpajHdgxZboDAe6n-pck4XGVGyXEkD3kkVO73xmZBFsVCZ3SWF5dP_M_MWnw8cpYPL-Md8zMo-ksi8Kldd50jwW7Lc38xUlBWu8oe_8g 641w, http://web.archive.org/web/20221007082346im_/https://lh4.googleusercontent.com/HGAdRyh_UC3EKRjQol_JHGwbYxjz5moC-she7n5i8_LpajHdgxZboDAe6n-pck4XGVGyXEkD3kkVO73xmZBFsVCZ3SWF5dP_M_MWnw8cpYPL-Md8zMo-ksi8Kldd50jwW7Lc38xUlBWu8oe_8g 1282w" src="../Images/2175ec2d1d881310fe4552136d3ee3cd.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007082346im_/https://lh4.googleusercontent.com/HGAdRyh_UC3EKRjQol_JHGwbYxjz5moC-she7n5i8_LpajHdgxZboDAe6n-pck4XGVGyXEkD3kkVO73xmZBFsVCZ3SWF5dP_M_MWnw8cpYPL-Md8zMo-ksi8Kldd50jwW7Lc38xUlBWu8oe_8g"/>
  </figure><p/>
<br/>
<p>还有一个更棒的功能——base64在加载时提供了模糊效果，这给用户带来了即时页面渲染的感觉。别忘了检查使用sharp transformer进行图像编码的其他可能性——你会在 <span> <u> <a href="http://web.archive.org/web/20221007082346/https://www.gatsbyjs.org/packages/gatsby-image/">盖茨比-图像文档</a>中找到。</u> </span></p>
<h3>那我能在哪里举办呢？</h3>
<p>这一部分可能是最激动人心的。要从所有这些React内容中生成一个网站，您只需运行gatsby build命令。之后，在你的公共文件夹中，你会发现一个静态页面，你可以在任何主机上托管它——甚至在s3存储桶上！但是在静态页面的表面简单性之下，您会发现超级智能的解决方案，如PWA功能、积极的预取、base64编码的响应图像等等！现在你自己去试试吧！</p>
<h3><span>但是2019年还值得用吗？</span></h3>
<p>当然啦！Gatsby得到了社区和核心团队的广泛支持(显然甚至得到了React的创作者的支持)。它肯定会统治静态网站的市场，因为没有其他解决方案能以如此少的投入提供如此多的东西。看看我们只用了几步就取得了什么成就吧！我们已经创建了一个具有路由和图像处理功能的全功能静态网站。我们的网站提供开箱即用的PWA功能，并在绩效审计中获得最高分。如果我们选择在经典的、普通的HTML/CSS/js前端堆栈中做同样的事情，事情会复杂得多。</p>
<hr/>
<p><span>照片由<span> </span> </span> <a href="http://web.archive.org/web/20221007082346/https://unsplash.com/photos/8OyKWQgBsKQ?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">马库斯·斯皮斯克</a> <span> <span> </span>上<span> </span> </span> <a href="http://web.archive.org/web/20221007082346/https://unsplash.com/search/photos/javascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">下</a></p></span></div>    
</body>
</html>