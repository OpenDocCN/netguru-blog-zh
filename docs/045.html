<html>
<head>
<title>Which JavaScript UI Testing Framework to Use in 2020?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>2020年用哪个JavaScript UI测试框架？</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/which-javascript-ui-testing-framework-to-use-in-2020#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/which-javascript-ui-testing-framework-to-use-in-2020#0001-01-01</a></blockquote><div><div id="hs_cos_wrapper_post_body"><span><div class="blog-post__lead h3"><p>现在，大多数网页都是基于JavaScript的。因此，使用相同的语言来编写测试是合乎逻辑的。前端开发人员可以维护测试，执行脚本，与页面自然交互，但是应该使用哪个JS框架呢？</p></div><p>市场上有这么多可用的工具，你们中的很多人可能已经在脑海中问过这个问题。有一些老的和众所周知的解决方案需要大量的配置才能启动，也有一些新奇的技术用五分钟的设置和清晰的文档吸引着我们。</p>
<p>我将尽我所能来回顾一些最受欢迎的，并提供一个总结，每一个的利弊。我将专注于端到端(E2E) UI测试，因为这是我的专业领域。</p>
<h2><strong><span data-preserver-spaces="true">Selenium web driver+JavaScript</span></strong></h2>
<p>您可能已经听说过Selenium WebDriver。它是最受欢迎的开源测试框架，经常为其他自动化框架提供动力。它的一些最大的优点是它是通用的、健壮的，并且可以和任何浏览器一起使用。除此之外，它有一个庞大的活跃用户社区，你可以很容易地在互联网上找到问题的答案。另一方面，它不是很快，需要更多的知识来正确设置。要获得漂亮的包装函数，您需要自己编写它们。</p>
<p><span data-preserver-spaces="true"/></p><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/image-34.png?width=700&amp;name=image-34.png 700w, http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/image-34.png?width=1422&amp;name=image-34.png 1422w" src="../Images/cd3b3a68308ec4f217204c02272cae08.png" alt="How Selenium works" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/image-34.png?width=700&amp;name=image-34.png"/>
  </figure><br/></span><p/>
<p><span data-preserver-spaces="true"> <strong>利弊</strong> </span></p>
<ul>
<li><span data-preserver-spaces="true">多种浏览器支持</span></li>
<li><span data-preserver-spaces="true">大社区</span></li>
<li><span data-preserver-spaces="true">高度可配置</span></li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li><span data-preserver-spaces="true">陡峭的学习曲线</span></li>
<li><span data-preserver-spaces="true">需要大量的设置</span></li>
<li><span data-preserver-spaces="true">不是最快的一个</span></li>
</ul>
<p><strong>示例包括登录</strong></p>
<pre><code class="language-javascript">
it('User can log in', async () =&gt; {
  await driver.get('http://automationpractice.com/index.php');
  await driver.findElement(By.xpath('//div[@class="header_user_info"]')).click()
  await driver.wait(until.elementLocated(By.id('email')));
  await driver.findElement(By.id('email')).sendKeys('example@netguru.com')
  await driver.findElement(By.id('passwd')).sendKeys('password', Key.RETURN)
  await driver.wait(until.titleContains("My account"));
  driver
    .getTitle()
    .then(title =&gt; {
      expect(title).toEqual('My account - My Store');
    });
});
</code></pre>
<h2><strong> <span data-preserver-spaces="true">柏树</span> </strong></h2>
<p>Cypress在2017年出现时在市场上相当新鲜，其受欢迎程度正在稳步增长。它提供了一个一体化的解决方案，需要很少的设置，并且不基于Selenium。阅读它的文档，你可以知道它是为了方便用户而设计的。有一个优秀的、极简的运行器，你可以在上面观看你的测试一页一页地进行，你甚至可以偷看每一步。与Selenium相比，一个最重要的缺点是仅限于基于Chromium的浏览器和Firefox，这是最近才添加的支持。一些功能仍然不是内置的，需要工作区和库，比如文件上传。</p>
<p><strong>优点</strong></p><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/Kapture%202020-01-16%20at%209.46.17.gif?width=700&amp;name=Kapture%202020-01-16%20at%209.46.17.gif 700w, http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/Kapture%202020-01-16%20at%209.46.17.gif?width=1400&amp;name=Kapture%202020-01-16%20at%209.46.17.gif 1400w" src="../Images/2e086655407f16cc101fa736fb815b8c.png" alt="Kapture 2020-01-16 at 9.46.17" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/Kapture%202020-01-16%20at%209.46.17.gif?width=700&amp;name=Kapture%202020-01-16%20at%209.46.17.gif"/>
  </figure><span>Cypress offers convenient runner</span><p><span data-preserver-spaces="true">易于设置和编写</span></p>
<p><span data-preserver-spaces="true">测试运行器使调试变得简单明了</span></p>
<ul>
<li><span data-preserver-spaces="true">良好的文档记录</span></li>
<li><strong>缺点</strong></li>
<li>仅支持基于Chromium的浏览器和Firefox</li>
</ul>
<p><span data-preserver-spaces="true">缺少一些功能</span></p>
<ul>
<li><span data-preserver-spaces="true">需要付费才能解锁完整版</span></li>
<li><strong>例子</strong></li>
<li><strong> <span data-preserver-spaces="true"> WebdriverIO </span> </strong></li>
</ul>
<p>WebdriverIO于2015年首次推出。它提供了Selenium WebDriver API的定制实现。主要优势是通过使用Appium同时支持web和移动。按照解释每个步骤的精心编写的文档进行设置是非常容易的。该网站列出了许多样板文件，包括大多数流行的框架，如Cucumber、Jasmine和Mocha。它还支持Selenium支持的所有浏览器。然而，它不像这里介绍的其他框架那样受欢迎，也不是所有的东西都能在Google上找到。API文档不完整。</p>
<pre><code class="language-javascript">
it('User can log in', () =&gt; {
  cy.visit('http://automationpractice.com/index.php')
  cy.contains('a', 'Sign in').click()
  cy.get('#email').type('example@netguru.com')
  cy.get("#passwd").type('password{enter}')
  cy.title().should('include', 'My account - My Store')
})
</code></pre>
<h2><strong>优点</strong></h2>
<p><span data-preserver-spaces="true">易于设置</span></p>
<p><span data-preserver-spaces="true">专用社区</span></p>
<ul>
<li>
<p><span data-preserver-spaces="true"> Appium支持</span></p>
</li>
<li>
<p><strong>缺点</strong></p>
</li>
<li>
<p><strong>例子</strong></p>
</li>
</ul>
<p><strong><span data-preserver-spaces="true">CodeceptJS</span>T3】</strong></p>

<p>利用许多其他框架，CodeceptJS可能是这个列表中最通用的工具。配置允许用WebDriverIO、量角器、Nightmare和木偶助手运行测试。都共享同一个API，所以写的代码都是一样的。您首先会注意到的是特定的语法；测试是场景驱动的开箱即用。代码可以被非技术人员阅读和理解，允许他们帮助编写测试。一切都有很好的文档记录，而且，与Cypress类似，甚至有一个测试UI，您可以在其中看到每个测试步骤的快照，并轻松地调试它。</p>
<pre><code class="language-javascript">
it('User can log in', () =&gt; {
    browser.url('http://automationpractice.com/index.php')
    $('a=Sign in').click()
    $('#email').setValue('example@netguru.com')
    $('#passwd').setValue('password')
    browser.keys('Enter')
    const title = browser.getTitle()
    assert.strictEqual(title, 'My account - My Store')
})
</code></pre>
<h2><strong>优点</strong></h2>
<p><strong>缺点</strong></p>
<p><strong> <span>例如</span> </strong></p>

<p><span data-preserver-spaces="true"> Nightwatch.js </span></p>

<p>当我进入E2E测试时，Nightwatch.js这个框架吸引了我的注意。当时，设置和简洁的语法是我的主要优势。现在，安装仍然很快，但是文档并没有包含你需要的所有信息，其他框架已经做得更好了。它还使用Selenium Webdriver，因此您可以访问所有浏览器。该框架提供了所有需要的功能，但都处于平均水平。根据您的用例，您可能想要使用另一个工具。</p>
<pre><code class="language-javascript">
Scenario('User can log in', (I) =&gt; {
  I.amOnPage('http://automationpractice.com/')
  I.click('Sign in')
  I.fillField('#email', 'example@netguru.com')
  I.fillField('#passwd', 'password')
  I.pressKey('Enter')
  I.seeInTitle('My account - My Store')
});
</code></pre>
<h2><strong>优点</strong></h2>
<p><strong>缺点</strong></p>
<p><span data-preserver-spaces="true">弱文档</span></p>

<p><span data-preserver-spaces="true">有限的功能</span></p>
<ul>
<li>
<p>缓慢的性能</p>
</li>
<li>
<p><strong>例子</strong></p>
</li>
<li>
<p>量角器</p>
</li>
</ul>
<p>量角器是本文中提到的最古老的框架之一。它是由AngularJS的创建者专门用来测试Angular应用程序的，但它也可以用于其他页面。它曾经广受欢迎和推荐，但现在却因为其他工具而不再受欢迎。它使用Selenium，因此它提供了多种浏览器支持，甚至可以并行运行这些测试。适合角度应用，它包括有用的选择器和功能。设置很容易，但调试可能需要一些时间，对新手来说可能很难。它没有其他框架提供的内置等待功能。就个人而言，在这个时候，如果你的应用程序不使用Angular，我不会为此而烦恼，即使这样，我也会考虑其他选择。</p>
<pre><code class="language-javascript">
'User can log in': function (browser) {
  browser
    .url('http://automationpractice.com/')
    .waitForElementVisible('body')
    .click('a.login')
    .setValue('#email', 'example@netguru.com')
    .setValue('#passwd', 'password')
    .click('#SubmitLogin')
    browser.assert.title("My account - My Store")
    .end()
}</code></pre>
<h2><strong>优点</strong></h2>
<p><strong>缺点</strong></p>
<p>难以调试</p>

<p>人气下降</p>
<ul>
<li><strong>例子</strong></li>
<li>
<p>测试咖啡馆</p>
</li>
</ul>
<p>TestCafe类似于Cypress与其他框架相比非常新鲜。还有，就像柏树一样，它不是建立在硒元素上的。它提供了一个名为TestCafe IDE的测试运行程序，但它不仅仅是一个Cypress runner。您可以在那里构建测试，完全跳过编写代码。不幸的是，这是一个付费的解决方案——你可以免费使用30天，费用是每年250美元。</p>
<pre><code class="language-javascript">
it('User can log in', function() {
  var EC = protractor.ExpectedConditions;
  browser.waitForAngularEnabled(false);
  browser.get('http://automationpractice.com')
  element(by.linkText('Sign in')).click()
  browser.wait(EC.presenceOf(element(by.css('body'))), 5000)
  element(by.id('email')).sendKeys('example@netguru.com')
  element(by.id('passwd')).sendKeys('password')
  element(by.id('SubmitLogin')).click()
  expect(browser.getTitle()).toEqual('My account - My Store')
});
</code></pre>
<h2>与Cypress相比，TestCafe提供了多种浏览器支持，包括移动版本，并且它几乎可以开箱即用。我不必下载或安装任何浏览器驱动程序或特定的浏览器版本。我只是用不同的参数运行了一个命令，它成功了。还有智能断言查询机制，它自动等待更改发生并重试检查。当测试运行时，一个大的指针显示哪个元素正在被交互。唯一的缺点可能是语法，事实上您仍然需要考虑JS异步性，Cypress巧妙地包装了它，允许您编写同步代码。</h2>
<p><strong>优点</strong></p>
<p><strong>缺点</strong></p>
<p>摘要</p>

<p>所有的框架都有其优点和缺点。对我来说，最重要的是可达性。使用像Cypress和TestCafe这样的现代工具，你可以感觉到它们是为了解决上一代测试软件的问题而设计的。我重视的另一件事是我的测试同行的社区和支持。让我们来看看下面的图表，它显示了GitHub上每个存储库的星级数。</p>

<h2>Summary</h2>
<p>All frameworks have their pros and cons. For me, the most important thing is accessibility. With modern tools like Cypress and TestCafe, you can feel they were made to address the pains of the previous generation of testing software. Another thing I value is the community and support of my testing peers. Let's take a look at the graph below which shows the number of stars for each repository on GitHub over time.</p>
<p>正如你所看到的，代表柏树的蓝线正在快速上升，最近甚至超过了硒。在我看来，这证明了它与平易近人相结合的有用性。是因为Cypress被开发人员和测试人员广泛接受和喜欢。因此，它也是我向几乎所有人推荐的首选。如果你不要求支持更多的浏览器，你应该试一试。</p><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/stars.png?width=700&amp;name=stars.png 700w, http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/stars.png?width=1400&amp;name=stars.png 1400w" src="../Images/06366793a473ab7e75206fe029d7b2d2.png" alt="stars" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007200214im_/https://www.netguru.com/hs-fs/hubfs/stars.png?width=700&amp;name=stars.png"/>
  </figure><span>Graph by <a href="http://web.archive.org/web/20221007200214/https://star-history.t9t.io/">https://star-history.t9t.io/</a></span><p>第二名是TestCafe，因为它也完全跳过了Selenium，你可能知道也可能不知道，Selenium有时很不稳定。TestCafe感觉像一个健壮而完整的包。IDE是一个不错的选择，但是没有必要编写测试。</p>
<p>第三名，我想说，是Codecept，因为它独特的方法和对浏览器和移动应用程序的支持。唯一让我担心的是它不够普及。</p>
<p>是硒时代的终结吗？还没有，但是我认为我们正在到达那里。我在总结中不推荐Selenium，因为我认为它最好与其他语言一起使用，比如Java或Python。虽然，如果你正在寻找一个低风险的企业解决方案，它可能适合你。</p>
<p>自动化快乐！</p>
<p><span>照片由</span>金奎大·斯蒂文斯<span>拍于</span>T4【Unsplash】上</p>
<p>Happy automating!</p>
<hr/>
<p><span>Photo by </span>Daan Stevens<span> on </span><a href="http://web.archive.org/web/20221007200214/https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></p></div></div>    
</body>
</html>