<html>
<head>
<title>Frontend Quick Tips #5 Pipe/Compose - Proper Way to Transform Your Values</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>前端快速提示#5管道/组成-正确的方式来转换你的价值观</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/frontend-tips-5-pipe-compose-transform-values#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/frontend-tips-5-pipe-compose-transform-values#0001-01-01</a></blockquote><div><div id="hs_cos_wrapper_post_body"><span><div class="blog-post__lead h3"><p>没有人喜欢那些大文章——这就是为什么我们创建快速提示——从你阅读它们的那一刻起改变你的开发者生活的简短提示。这些可能是JS代码中解释的一些模式，或者是一些更好的代码的技术。</p></div>Problem?
<p>我们必须转换我们的值，并将每个函数的结果作为下一个函数的参数传递。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/Q5.png?width=569&amp;name=Q5.png 569w, http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/Q5.png?width=1138&amp;name=Q5.png 1138w" src="../Images/689d4213d5660b766c472cabc3662921.png" alt="Q5" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/Q5.png?width=569&amp;name=Q5.png"/>
  </figure><p/>
<p>这是不可伸缩的，需要一些样板代码来正确处理。</p>
<h2>解决方案？</h2>
<p>将函数的结果传递给下一个函数的管道模式(类似于用then/catch链接承诺时使用的模式)。</p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q51.png?width=279&amp;name=q51.png 279w, http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q51.png?width=558&amp;name=q51.png 558w" src="../Images/e645dfd8f2b8855323781349587a298b.png" alt="q51" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q51.png?width=279&amp;name=q51.png"/>
  </figure><p/>
<p>更加优雅，可读性更强。如何创建这样的管道函数？这里有一个你可以使用的片段:<span spellcheck="false"/></p>
<p><code>export const pipe = (...fns) =&gt; args =&gt; fns.reduce((result, nextFun) =&gt; nextFun(result), args);</code> <span spellcheck="false"/></p>
<p>花点时间去理解这个很小但相当混乱的函数。</p>
<p>首先，我们获取一个函数列表，并返回一个运行所有函数的函数。通过使用reduce，我们可以将前一个函数的结果传递给下一个函数。</p>
<h3><em>作曲</em>呢？</h3>
<p>还有一个替代方法——<code><em>compose</em></code>方法，它有相似的主体和结果</p>
<p><code>export const compose = (...fns) =&gt; args =&gt; fns.reduceRight((result, nextFun) =&gt; nextFun(result), args);</code></p>
<p>唯一的区别是数据流的方向。通过管道，数据从第一个函数流向另一个函数。使用compose，它从最后一个开始，流向第一个。你为什么要逆转水流呢？为了可读性——这在React中很常见。</p>
<figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q52.png?width=354&amp;name=q52.png 354w, http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q52.png?width=708&amp;name=q52.png 708w" src="../Images/d1d803941af2613f720fea6afd533908.png" alt="q52" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q52.png?width=354&amp;name=q52.png"/>
  </figure>
<p>我们正在读取包装我们组件的内容。</p>
<p>下面两张图展示了与的区别:</p>
<p><span><a href="http://web.archive.org/web/20221007191619/https://medium.com/@acparas/what-i-learned-today-july-2-2017-ab9a46dbf85f">https://medium . com/@ AC paras/what-I-learned-today-July-2-2017-ab 9a 46 DBF 85 f</a><a href="http://web.archive.org/web/20221007191619/https://medium.com/@acparas/what-i-learned-today-july-2-2017-ab9a46dbf85f"/></span></p>
<p><span/></p><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q53.png?width=330&amp;name=q53.png 330w, http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q53.png?width=660&amp;name=q53.png 660w" src="../Images/86a429ef38d0fed04f561fc0644995f8.png" alt="pipe compose" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q53.png?width=330&amp;name=q53.png"/>
  </figure><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q54.png?width=330&amp;name=q54.png 330w, http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q54.png?width=660&amp;name=q54.png 660w" src="../Images/97d29e56462290c864db0acd7770f4ac.png" alt="q54" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221007191619im_/https://www.netguru.com/hs-fs/hubfs/q54.png?width=330&amp;name=q54.png"/>
  </figure></span><p/>
<h2>注意</h2>
<p>这种模式在Rxjs (observables)中被广泛使用，然而在web上的一些例子中可以找到几乎相同的管道实现。这个代码片段的实现不是我的功劳。</p>
<p>更详细的解释:<a href="http://web.archive.org/web/20221007191619/https://vanslaars.io/blog/create-pipe-function/"><span>https://vanslaars.io/blog/create-pipe-function/</span>T3】</a></p></div></div>    
</body>
</html>