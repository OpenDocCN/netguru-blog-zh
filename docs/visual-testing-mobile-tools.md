# 移动应用的可视化测试–优势、工具和最佳实践

> 原文：<http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/visual-testing-mobile-tools>

 有各种类型的测试和许多质量保证技术。您可以从手工测试、单元测试、功能测试到端到端测试的方法中进行选择。

每一种测试技术都为项目带来了额外的价值，并提高了项目的质量。其中一些技术也被混淆或误用。 

最大的困惑出现在测试用户界面本身的时候。团队通常测试 UI 的其他方面，比如 UI 组件的行为。这本身并不坏，但是对于测试 UI 本身的问题来说，这不是一个最可行的解决方案。幸运的是，所谓的视觉测试提供了帮助，这是提供最高质量 UI 元素的最佳解决方案。我们仔细研究了视觉测试的好处及其在移动应用中的实际用途。

## **为什么要进行视觉测试？**

在[移动应用开发](http://web.archive.org/web/20220927100611/https://www.netguru.com/services/mobile-development)过程中，有许多可能的方法来测试 UI。然而，视觉测试被证明是最精确和最快的方法。它使应用程序创建者能够自动化视图检查过程，从而显著加快工作速度。您可以验证特定组件是否正确渲染，或者它是否不会导致回归。开发人员将更快地得到关于错误的通知，结果，测试人员将有更多的时间来测试应用程序的其他部分。

在每个测试中，你可以检查一个特定元素的属性是否有想要的值。在代码审查期间，即使是元素的颜色、重定位或框架的最微小变化也可能逃过开发人员的注意，而自动化视觉测试肯定会检测到它们。这样，你的应用程序的 UI 将永远是“像素完美”。

![Copy of Blog interviews – quotes-8](img/cb81e3075c539c7edd01d1b6bfa05c83.png)

一个工程师只需要写几行代码来检查几个不同的视图。这减少了测试代码的数量，使其更加清晰易读。这在有大量遗留代码的大型项目中尤其重要，在这些项目中，建立一个新的测试环境可能需要很长时间。有了可视化测试，我们可以自动化这个过程，结果，节省了许多测试人员的时间。

但是视觉测试到底是如何工作的呢？

## **视觉测试如何工作**

视觉测试是一种检测用户界面外观变化的方法，这种变化可能会导致退化。主要机制依赖于将实际 UI 与同一 UI 的参考快照进行比较。这是通过运行专门的测试套件来生成参考快照来实现的。这些快照随后保存在设备内存中，这意味着需要在每台设备上单独运行该过程。在生成参考快照之后，可以运行主测试套件，通过将它们与快照进行比较来验证 UI 的当前状态。运行测试后，将生成一份报告，其中包含结果摘要。视觉测试工具可以指出实际 UI 和快照之间的确切差异(预期结果)。每次更改 UI 时，都需要再次生成参考快照，以保持它们是最新的。

## **视觉测试工具**

**Android:**Android 测试支持库中没有针对 [Android](http://web.archive.org/web/20220927100611/https://www.netguru.com/services/android-mobile-development) 的可视化测试工具，因此开发者需要创建自己的工具。为数不多的可用框架之一是由脸书 创建的 [截屏测试安卓系统。该工具允许您测试整个屏幕以及较小的 UI 部分，例如单个控件。Runtastic 增加了对 CI 和 Android 6.0 的更好支持，也对他们的项目做了一些小的改进。该库还包含一个插件，允许更容易地访问生成的测试报告。](http://web.archive.org/web/20220927100611/https://facebook.github.io/screenshot-tests-for-android/)

**iOS:** 与 Android 类似，苹果也不提供原生执行快照测试的工具。所以，工程师需要自己想办法绕过去。脸书创建了一个名为 FBSnapshotTestCase 的库。它目前由优步以 iOSSnapshotTestCase 的名字支持。目前，这是在苹果设备上进行视觉测试最可靠的解决方案。

**React Native:**React Native 应用程序快照测试最流行的工具是 [Jest](http://web.archive.org/web/20220927100611/https://jestjs.io/docs/en/snapshot-testing) ，这是一个库，它使测试人员能够识别应用程序中意外的接口变化——无论该接口是 API 响应、UI、日志还是错误消息。另一个值得一提的工具是[Loki](http://web.archive.org/web/20220927100611/https://github.com/oblador/loki)。它主要用于 web 开发，但是开发人员也在 React Native 中使用它。不幸的是，没有选项来配置这个工具。为了有效地运行测试，开发人员需要在相同屏幕尺寸的相同模拟器上进行测试。

## **视觉测试的好处**

使用可视化测试技术的主要好处是可以更快地识别 bug 并防止退化。这个过程迫使开发人员在各种设备上维护更高质量的 UI。认识到用户界面的问题对设计师来说也是一个有价值的反馈，设计师可以重新思考他们在不同屏幕尺寸或分辨率的设备上的设计方法。视觉测试还可以发现与特定设备上的特定视图相关的边缘情况，这需要花费大量时间来手动发现。在紧要关头，视觉测试的主要好处是:

1.  快速缺陷检测

2.  提高了代码和用户界面的质量

3.  回归还原

4.  控制不同设备上的视图

5.  对设计师的有效反馈

6.  代码缩减

7.  低进入门槛(他们很容易实现)

8.  降低测试人员的工作量

9.  快速实现

10.  自动化

## **质量保证视角**

从应用质量的角度来看，显然有很多好处，但是质量保证专家[T2 也注意到了好处。他们花在修复 bug 上的时间更少，所以他们可以专注于应用测试的其他部分。可视化测试的正确实现提高了其他特性的质量，减少了基本功能错误的发生。](/web/20220927100611/https://www.netguru.com/services/quality-assurance)

自动化测试也比工程师的眼睛更准确。他们甚至可以察觉到应用程序外观上最微小的差异。修改它们也很容易。

此外，它们使工作更有效率。如果手动完成，那么具有如此高精度水平的回归检测将花费大量时间。通过视觉测试，工程师只需要验证功能方面，比如当你点击一个按钮时它是否工作。剩下的由工具来完成。

![Copy of Blog interviews – quotes (2)-4](img/e84fa3f7e2a5b2db6e98f4ae47d45510.png)

**需要考虑的事情**

另一方面，在进行视觉测试之前，你也应该考虑一些事情。首先，你的团队应该意识到视觉测试和其他类型的测试一样重要。其次，工程师应该密切关注参考屏幕的更新，并检查那里是否有什么没有改变。

这些工具也不是 100%完美的，有时它们可能会检测出错误。然而，知道这一点并有两个屏幕(前一个和当前的)，您总是可以自己验证结果。在开发过程中也可能存在视觉测试无法识别的错误。如果回归发生在一个不明显的视图中，例如一个没有被自动化测试覆盖的视图中，这种情况就可能发生。然而，有一个经验丰富的开发人员和测试人员团队，这样的问题总是可以避免的。

**总结**

## 可视化测试可以自动化应用程序中的缺陷检测过程，并显著加快开发速度。它们有许多好处，并且通过正确的实施，它们将确保您的产品达到最高质量。如果您有更多关于视觉测试的问题，请给我们留言。我们总是很乐意聊天。

Visual tests can automate the process of bug detection in your application and significantly speed up development. They have many benefits, and with the right implementation they will assure top quality of your product. If you have more questions concerning visual testing, drop us a message. We’re always happy to chat.