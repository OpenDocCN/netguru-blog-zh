# 什么是 Android 即时应用程序，它们是如何工作的？

> 原文：<http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/android-instant-apps>

 使用 Android 即时应用程序，您可以消除安装应用程序或游戏时的摩擦。即时应用有很多好处，也有一系列的缺点。哪个更重要？我们将在下面探讨这一点以及更多内容。

如果你想知道如何在不安装应用程序的情况下试用它，有一种方法——Android instant apps。这项技术可以让你在 Android 设备上运行应用程序，而无需安装它们，这意味着几乎不会使用任何资源或内部存储。

通过网络链接打开的即时应用程序允许你在下载前查看应用程序。通过这样做，你可以知道这个应用程序是否适合你。

即时应用程序有助于建立对主应用程序的第一印象，但它们也有缺点，例如有限的支持权限和操作。下面，我们将深入探讨即时应用的复杂性，并概述其优点、缺点和使用案例。

## 什么是安卓即时应用？

谷歌即时应用程序(现为 Google Play Instant)于 2016 年和 2017 年向公众推出，为人们提供现有应用程序的子集。怎么会？即时应用程序允许用户从[原生 Android 应用程序](/web/20221006003106/https://www.netguru.com/services/android-mobile-development)体验中访问内容，而无需从 Play Store 安装应用程序。它们旨在节省 Android 用户设备上的空间，同时方便地将用户深度链接到应用程序的特定功能。

## Android 即时应用程序是如何工作的？

应用程序中的功能被分配了应用程序链接，这些链接用于启动这些功能。当链接被点击或用于意向启动时，Google Play 将 URL 与功能模块匹配，仅下载所需的功能 APK 文件，并启动 APK 清单文件中指定的入口点活动。

这使得 Android 用户能够快速访问特定的即时应用功能。用户只需点击链接，Android 即时应用程序就会处理剩下的事情。

重要的是要记住，即时应用程序只提供整个应用程序的部分功能。它们还包括启动屏幕上的“安装应用程序”按钮。

即时应用程序保存在缓存中，并在系统重启或存储空间不足时卸载。

## Android 上即时应用的结构

下图概述了 Android 即时应用程序的结构。

![Instant App Module Structure](img/65f8f20ff5f52db623fbd7a5ce2ce9ee.png)If you want to build or refactor your app so it’s compatible with instant apps, you need to create a specific module hierarchy. Each feature that’s accessible through the instant app has to be moved to its own module that’s navigable via a deep links intent filter.

每个单独的功能都可以访问“基本功能”代码库。即时应用模块负责向 Play Store 提供可下载的功能，应用模块仍然负责生成 APK/捆绑包。

记住:基本特性应该只包括核心库，因为它会影响模块的大小。此外，将所有必要的导入转移到指定的特性模块中也很重要。

## 启用即时 Android 应用

对于 Android，有两个选项来启用即时应用程序，但并不完全清楚每个选项的作用:

1.  轻按“设置”>“应用程序与通知”>“默认应用程序”>“打开链接”>“即时应用程序”(打开应用程序中的链接，即使它们没有安装)–默认打开
2.  进入 Google Play >个人资料照片>设置>通用> Google Play 即时>升级网页链接–默认关闭

就通过 Google Play 访问而言，请按照下面截图中的步骤来启用 Android 即时应用程序:

1.  **在 Google Play 中点击您的个人资料照片**
    ![Enabling Android instant apps – step 1](img/b4041310ead725795a6e42004816f8eb.png)
2.  **打开设置**

![Enabling Android instant apps – step 2](img/ef17249dfa442f036ea03f3458ca83ac.png)

3.  **选择常规**

![Enabling Android instant apps – step 3](img/61010819cc0455829ade58dbf996b77f.png)

4.  **点击 Google Play Instant**

![Enabling Android instant apps, step – 4](img/50526fdb237903edf676519df4a016e5.png)

5.  **启用升级网页链接**

![Enabling Android instant apps – step 5](img/feaa8d7d1d3792c1cee5dc74a62d7a23.png)

## 安卓即时应用有什么好处？

即时应用是尝试原生应用体验的一种快速简单的方式。下面，我们概述一下主机更多的优点:

*   您可以立即打开并运行应用程序，而无需安装它。
*   第一个(也是主要的)摩擦点(安装 app)就去掉了。
*   通过开辟一种寻找和体验应用的新方式，应用的可发现性大大增加。
*   即时应用程序的链接很容易共享——没有准入门槛。
*   即时应用有助于建立对主应用的第一印象。
*   对于可用的功能，它们提供了与可安装应用完全相同的产品体验，但通过一个 URL。
*   即时应用程序适用于非常小的应用程序，但也适用于较大的应用程序，如购物应用程序、播客应用程序和新闻应用程序。这是因为当您单击该链接时，它只会下载您的请求所需的模块。
*   如果你使用的是运行 Android 8.0 (API 级别 26)或更高版本的设备，并且你的应用程序指定的`targetSandboxVersion`为 2，那么你的数据会自动传输到完整的应用程序版本。

## 安卓即时应用有哪些局限性？

首先，在 Google Play 设置中，Google Play Instant 在设备上是默认禁用的。屏幕上有一个说明:“即使关闭了这个设置，你也可以通过点击 Google Play 品牌的链接继续尝试即时应用。”但是，这张纸条有些混乱，你不同意吗？还有一些缺点，包括:

*   即时应用只能在 Android 5.0 (API 级别 21)或更高版本上运行。
*   即时应用程序运行在沙箱环境中(一种特殊的 SELinux 沙箱)，在常规应用程序和即时应用程序之间没有一对一的 API 行为映射。
*   大小限制为 15 MB(以前为 4 MB)。
*   二进制文件应该尽可能小，以便快速加载——对每个入口点使用模块，只加载需要的内容。
*   多个入口点需要多个活动。
*   不可能发送和接收系统广播。
*   即时应用程序提供有限的支持权限和操作。
*   有限的存储访问。
*   您不能与其他应用程序共享图像等内容。
*   即时应用不能创建后台服务。
*   他们不能与设备上已安装的应用程序进行交互，除非下列情况之一为真:
    -已安装应用程序中的一个或多个活动将`android:visibleToInstantApps`元素设置为真(这适用于运行 Android 8.0 (API 级别 26)或更高版本的应用程序)。
    -一个已安装的应用程序包含一个包含`CATEGORY_BROWSABLE`的意图过滤器。
    -即时体验是使用`ACTION_SEND, ACTION_SENDTO, or ACTION_SEND_MULTIPLE`动作发送意图。
*   Android 即时应用程序在清单合并方面存在问题。
*   索引链接可能需要 24 个小时，这减慢了即时应用的测试速度。
*   要加载即时应用程序，用户必须在提示时按“在浏览器中打开”，而不是“打开即时应用程序”。那个选择似乎是永久的，我们还没有找到重置它的方法。

## Android 即时应用的使用案例

从停车场解决方案到餐馆显示菜单，各行各业都有很多即时应用的使用案例。最能代表安卓即时应用的应用类型包括:

1.  电子商务——产品页面和结账
2.  游戏–Google Play 游戏应用程序的教程页面和介绍页面
3.  娱乐–视频播放器和与其他 Android 用户的互动，如消息应用程序

## Android 即时应用:一种尝试新移动应用的方式

Android 即时应用程序不需要安装，是检查应用程序并查看您是否喜欢它的理想选择，这意味着它们使用的资源很少，内部存储也不多。对于电子商务、游戏和娱乐特别有用，你可以立即运行即时应用程序，它们提供与同等的可安装应用程序相同的产品体验。

然而，它也有许多缺点，从常规应用程序和即时应用程序之间没有一对一的 API 行为映射，到有限的支持权限和操作。此外，据我们所知，Android 即时应用在 Android 设备上默认是禁用的(Google Play)，这造成了潜在的使用障碍。不管你的观点是什么，他们仍然提供有用的服务。

如果你对构建即时应用感兴趣，看看我们关于如何创建 Android 即时应用的文章。