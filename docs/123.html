<html>
<head>
<title>How to Automate Local App Setup Process Using Bin/Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何使用Bin/Setup自动化本地应用程序设置过程</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/automate-local-app-setup-process-bin-setup#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/automate-local-app-setup-process-bin-setup#0001-01-01</a></blockquote><div><span><div class="blog-post__lead h2"><p>最近，我做了一些关于创建交互式bin/setup脚本的研究，该脚本可以引导开发人员通过app的本地设置过程加入新项目。</p></div><p> </p>
<p>新的<span> bin/setup </span>脚本应该从一个样本创建一个<span> sec_config.yml </span>文件，同时要求开发人员提供必要的缺失值并将它们保存到新文件中。</p>
<p>我创建的脚本是一个示例，需要时可以更改。我创建了对yaml格式的标准<span> sec_config/secrets </span>文件和标准的支持。环境文件格式。</p>
<p>剧本分成几个部分。</p>
<p>第一部分</p>
<h3>[代码]</h3>
<p data-gist-id="c8e3ad491fe8f0a621f6b6a98c66c706">在这里，您需要添加安装/更新gems、安装所需的ruby版本、npm/bower依赖项等命令。</p>
<p>第二部分</p>
<p>[代码]</p>
<h3>这个部分负责所有配置文件的逻辑。</h3>
<p data-gist-id="d310a025e1fce7c5e72e545cd905e658">在第一个块中，您可以从示例文件创建<span> database.yml </span>。如果<span>数据库. yml.sample </span>文件有两个密钥:用户名和密码，你可以如上图所示替换它们。</p>
<p>你也可以用<span> gsub_file </span>方法替换代码:</p>
<p>[代码]</p>
<p>[代码]</p>
<p data-gist-id="62e3c18dc337839a93bea7b79a75760a">在这个块中，您可以从示例创建一个新的配置文件，或者编辑现有的配置文件(如果存在的话)。您需要在<span> CONFIG_FILE </span>常量中设置配置路径。脚本将要求用户提供所需的值(示例文件中有键，但它们没有值)。</p>
<p data-gist-id="c3d662bf9b1d41c9a1e9d22cc7900e4e">[代码]</p>
<p>对于这个<span> sec_config.yml.sample </span>文件，脚本将这样工作:</p>
<p data-gist-id="3ce07013acf705300cfe926d1564b36b">[代码]</p>
<p>...这导致下面的<span> sec_config.yml </span>:</p>
<p data-gist-id="85bc2a69dfbeed170d010c40f9b4ad24">[代码]</p>
<p>[代码]</p>
<p data-gist-id="a5be2f2daa71d843ff4a72f1be3e3b54">上面的模块是用来创建标准的。此示例中的env文件:</p>
<p data-gist-id="28d788e7dfd51b5886b4aa92e3c1d0a3">[代码]</p>
<p>这将要求用户输入缺少的值。您需要获取样本文件中存在但没有值的每个键的值。</p>
<p data-gist-id="3d15aa5d035a23d7b33418bad0603fbb">第三部分</p>
<p>[代码]</p>
<p>这个部分负责数据库的设置。你可以在这里使用<span> bin/rake db:setup </span>或者添加额外的命令，比如<span> bin/rake db:test:prepare </span>。当然，你可以像例子中所示的那样添加漂亮和丰富多彩的信息。</p>
<h3>第四部分</h3>
<p data-gist-id="3e15c48db13ef95e3d90475ed325760a">[代码]</p>
<p>This section is taking care of the database setup. You can just use <span>bin/rake db:setup</span> here or add additional commands like <span>bin/rake db:test:prepare</span>. Of course, you can add beautiful and colourful messages as shown in the example.</p>
<p>第五部分</p>
<h3>[代码]</h3>
<p data-gist-id="2ed33c89d4e9335cba21c42419dbf012">您可以在这里为开发人员添加消息。</p>
<p> </p>
<h3>请在您的项目中随意使用和定制这个脚本。希望这能帮助开发者更快更容易的设置项目。</h3>
<p data-gist-id="3ae754c7518354793dc00a580d1caa10">[code]</p>
<p>Here you can add messages for developers.</p>
<p> </p>
<p>Feel free to use and customise this script in your projects. I hope this will help developers set up projects faster and easier.</p></span></div>    
</body>
</html>