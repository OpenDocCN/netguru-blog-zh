<html>
<head>
<title>Android Security Analysis Tools, Part Four - MobSF</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android安全分析工具，第四部分- MobSF</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/android-security-analysis-tools-part-four-mobsf#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/android-security-analysis-tools-part-four-mobsf#0001-01-01</a></blockquote><div><span><div class="blog-post__lead h3"><p>本文是系列文章的一部分:</p> 
<p><a href="/web/20220924170138/https://www.netguru.com/blog/android-security-an-overview-of-static-analysis-tools-part-one" rel="noopener"> Android安全分析工具，第一部分- JAADAS </a></p> 
<p><a href="/web/20220924170138/https://www.netguru.com/blog/android-security-analysis-tools-part-two-androbugs" rel="noopener"> Android安全分析工具，第二部分- DIVA应用和Android bugs</a></p> 
<p><a href="/web/20220924170138/https://www.netguru.com/blog/android-security-analysis-tools-part-three-drozer-and-qark" rel="noopener"> Android安全分析工具，第三部分- Drozer和QARK </a></p> 
<p>Android安全分析工具，第四部分- MobSF</p> 
<p>我们呈现致力于Android应用安全分析工具的系列博文的最后一部分。本系列中讨论的工具是由OWASP移动测试指南(MSTG)建议的。在前面的部分中，我们讨论了<a href="/web/20220924170138/https://www.netguru.com/blog/android-security-an-overview-of-static-analysis-tools-part-one" rel="noopener">贾达斯</a>、<a href="/web/20220924170138/https://www.netguru.com/codestories/android-security-analysis-tools-part-two-androbugs" rel="noopener">和</a>、<a href="/web/20220924170138/https://www.netguru.com/blog/android-security-analysis-tools-part-three-drozer-and-qark" rel="noopener">德罗泽和QARK </a>。这一章将集中讨论MobSF，这也是MSTG建议的。概述的主要目标是找到最好的工具，它也最容易与现有的CI/CD堆栈集成。</p></div><h2><span>不仅仅是一个控制台</span></h2>
<p>MobSF，也称为<a href="http://web.archive.org/web/20220924170138/https://github.com/MobSF/Mobile-Security-Framework-MobSF">移动安全框架</a>，是OWASP MSTG建议的另一个工具，用于移动应用程序的静态安全分析。它旨在对最常见的移动平台(Android、iOS和Windows)进行静态和动态的安全性分析和测试。与前面讨论的工具不同，MobSF有一个web服务形式的图形用户界面。web服务由一个显示分析结果的仪表板、自己的文档站点、一个集成的仿真器/symulator和一个允许用户自动触发分析的API组成。正如我提到的，MobSF支持不同的移动平台，因此用户能够将APK、IPA或APPX文件发送到仪表板来触发分析过程。该过程将在用户发送应用程序时开始。该工具将对其进行反编译，并对反编译后的源代码进行分析。分析也可以在压缩的源代码上执行。</p>
<p> </p>
<p>MobSF是一个主要用Python编写的框架，支持JavaScript、Smali代码和shell命令。最新的版本是1.0Beta，在GPL 3.0许可下发布。</p>
<p> </p>
<p>该框架是一个非常强大的工具，尤其是它能够测试多个移动平台。该特征是该工具区别于之前概述的工具的另一个方面。然而，这个框架的最大优势当然是它可以找到的分析类型和漏洞的列表。以下是一些最有趣的功能:</p>
<ul>
<li>基本申请信息扫描；</li>
<li>应用组件检测和配置检测(活动、服务、内容提供商等。对于安卓)；</li>
<li>清单文件分析；</li>
<li>源代码反编译；</li>
<li>证书和签名分析；</li>
<li>权限分析和分类；</li>
<li>本地库分析(例如，检测C库的错误配置的ASLR)；</li>
<li>SDK误用检测；</li>
<li>代码问题(例如，包含敏感信息的日志、未删除的tmp文件、原始SQL查询的执行等。);</li>
<li>恶意软件检测；</li>
<li>外部API通信检测；</li>
<li>资源分析；</li>
<li>检测代码或资源中的敏感信息；</li>
<li>等等。</li>
</ul>
<p>此外，还可以在完成静态分析后执行动态分析。这是可能的，因为仿真器集成在设备中。模拟器允许您创建不同的环境，测试应用程序，并检查分析期间发布的日志。</p>
<h2>综合</h2>
<p>MobSF将其源代码发布在GitHub 上的这个<a href="http://web.archive.org/web/20220924170138/https://github.com/MobSF/Mobile-Security-Framework-MobSF">存储库中。此外，该框架以随时可用的形式作为Docker容器发布。这个容器发布在名为</a><a href="http://web.archive.org/web/20220924170138/https://hub.docker.com/r/opensecurity/mobile-security-framework-mobsf/"> DockerHub </a>的Docker存储库中。由于这种方法，安装MobSF服务非常容易。要安装和运行这个工具，你只需要安装Docker，然后你就可以运行这两个命令:<span> </span></p>
<pre>docker pull opensecurity/mobile-security-framework-mobsf</pre>
<p> </p>
<pre>docker run -it -p 8000:8000 opensecurity/mobile-security-framework-mobsf:latest</pre>
<p> </p>
<p>第一个命令将下载容器DockerHub。第二个将使用端口8000上的容器运行Docker。得益于此，您可以轻松地将该工具集成到您的工具库中。此外，由于API是MobSF框架的一个集成部分，集成变得更加容易。由于这个集成的API，您可以使用标准的HTTP请求轻松发送应用程序、触发分析和收集结果。这使得集成非常容易和灵活。不幸的是，该框架不包含任何类型的访问管理，所以仪表板很容易访问。此外，该工具不支持HTTPs加密。这意味着，为了确保分析结果的安全，该工具应该安装在CI环境内部的本地网络中，或者安装在任何与互联网接入无关的地方。当然，该工具的源代码是可用的，因此可以实现额外的访问管理功能。但是，我们需要记住的是，在正式版本中没有这样的功能。</p>
<h2>连接</h2>
<p>如前所述，GUI是该工具与众不同的地方之一。它增加了工具的可用性，因为通过web浏览器管理它比仅仅使用控制台要容易得多。这使得该工具更加用户友好，因此执行分析和查看结果所需的时间可以显著减少。</p>
<div><figure class="image&#10;    &#10;    image--framed&#10;    " data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20220924170138im_/https://lh3.googleusercontent.com/uJI-FblzXMsINyuShn10Wc6AbSZGvBemNPEdyP9CTBkw218h8m5fRO90gQLw43Bhhjqiw9aQclpwNuedettVXnLL8KiRxRdeQgFgHD82vZ3ob1IyFceYPAldPGSERQsKePFG98Ie 0w" src="../Images/ccb71c3ef22bfd5539363a284ea6b4cf.png" alt="" loading="lazy" data-original-src="http://web.archive.org/web/20220924170138im_/https://lh3.googleusercontent.com/uJI-FblzXMsINyuShn10Wc6AbSZGvBemNPEdyP9CTBkw218h8m5fRO90gQLw43Bhhjqiw9aQclpwNuedettVXnLL8KiRxRdeQgFgHD82vZ3ob1IyFceYPAldPGSERQsKePFG98Ie"/>
  </figure></div>
<p> </p>
<p>如您所见，该界面是一个简单的基于Python的网页。所有分析都是在应用程序上传阶段进行的。然后框架会生成一个结果网页，你可以在上面的截图中看到。它包含有关被分析应用程序的所有信息，这些信息被分成不同的类别。这些类别基于应用分析的领域。如您所见，主菜单还包含下载报告和开始动态分析按钮。第一个将生成一个PDF文件形式的报告。它将包含网页上显示的所有结果。<em>启动动态分析</em>将启动包含仿真器的网页。<span>T3】</span></p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20220924170138im_/https://www.netguru.com/hs-fs/hubfs/Zrzut%20ekranu%202018-12-10%20o%2008.33.58.png?width=411&amp;name=Zrzut%20ekranu%202018-12-10%20o%2008.33.58.png 411w, http://web.archive.org/web/20220924170138im_/https://www.netguru.com/hs-fs/hubfs/Zrzut%20ekranu%202018-12-10%20o%2008.33.58.png?width=822&amp;name=Zrzut%20ekranu%202018-12-10%20o%2008.33.58.png 822w" src="../Images/0247a06705734f467b613409c64a6b96.png" alt="Zrzut ekranu 2018-12-10 o 08.33.58" loading="lazy" data-original-src="http://web.archive.org/web/20220924170138im_/https://www.netguru.com/hs-fs/hubfs/Zrzut%20ekranu%202018-12-10%20o%2008.33.58.png?width=411&amp;name=Zrzut%20ekranu%202018-12-10%20o%2008.33.58.png"/>
  </figure><p/>
<p>不幸的是，模拟器仍然有一些问题，很难运行。我希望这个特性很快得到修复——未来看起来很有希望。</p>
<p> </p>
<p>值得一提的是，主仪表板包含到API文档和历史网页的链接。“历史记录”页面包含最近扫描及其结果的列表。最近的扫描可以很容易地探索由于包括搜索引擎。</p>
<h2>赞成的意见</h2>
<ul>
<li>易于安装——基于Docker容器；</li>
<li>使用集成的API，易于与现有CI/CD堆栈集成；</li>
<li>丰富的图形界面；</li>
<li>应用程序反编译的复杂和多层分析；</li>
<li>准备好在多种移动平台上分析安全性——Android、iOS，甚至Windows</li>
<li>可以使用内置仿真器/模拟器直接对分析的应用程序执行手动测试。</li>
<li>由于框架存储的历史结果，可以比较分析结果；</li>
<li>可以生成和下载PDF格式的报告；</li>
<li>可以使用集成仿真器在设备上仿真系统事件、管理系统进程或分析文件；</li>
<li>是不断发展的；</li>
<li>开源</li>
<li>基于apktool和Dex2jar等经过良好测试的工具；</li>
<li>可以在JSON中生成结果。</li>
</ul>
<h2>骗局</h2>
<ul>
<li>缺少访问管理功能；</li>
<li>该框架仍处于测试阶段；</li>
<li>很难运行Android模拟器。</li>
</ul>
<h2>概观</h2>
<p>当然，MobSF是一个非常强大和复杂的工具。此外，作为唯一一个讨论的工具，MobSF有一个广泛的图形界面，这使得它更加用户友好。由于这些方面，该工具非常适合快速分析移动应用程序或回归测试。此外，由于易于安装和集成的Web API，该工具还可以集成到您当前的CI/CD堆栈中。在我看来，由于它的灵活性，它是一个非常好的工具，可以完美地适应许多现有的过程。我希望该工具将继续得到开发和改进。</p>
<p>下一步是什么？</p>
<h2>在对OWASP建议的几个工具进行审查之后，我们决定选择两个工具:QARK和MobSF。在我们看来，就功能而言，它们是最好的。它们也符合我们的第二个目标——它们很容易与现有的堆栈集成。鉴于这些方面，我们将在团队中对这两个工具进行测试实现。这些测试将让我们收集更多的信息，了解哪一个更适合我们的需求。测试后，我们将选择一个工具，并发布一个关于我们结论的简短案例研究。</h2>
<p> </p>
<p> </p>
<p><span>继续阅读:</span></p>
<hr/>
<p><span> <a href="/web/20220924170138/https://www.netguru.com/blog/android-security-an-overview-of-static-analysis-tools-part-one" rel="noopener"> <span> Android安全分析工具，第一部分——JAADAS</span></a></span></p>
<p><span><a href="/web/20220924170138/https://www.netguru.com/blog/android-security-analysis-tools-part-two-androbugs" rel="noopener">【Android安全分析工具，下篇——DIVA app和Android bugs</a></span></p>
<p><span><a href="/web/20220924170138/https://www.netguru.com/blog/android-security-analysis-tools-part-three-drozer-and-qark" rel="noopener">【Android安全分析工具，第三部分——Drozer和QARK </a> </span></p>
<p> </p>
<p><span>照片由<a href="http://web.archive.org/web/20220924170138/https://unsplash.com/photos/ZXYK4LljnT0?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">昆廷·凯梅尔</a>在<a href="http://web.archive.org/web/20220924170138/https://unsplash.com/search/photos/hubble-telescope?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>T5拍摄</span></p>
<p><span>Photo by <a href="http://web.archive.org/web/20220924170138/https://unsplash.com/photos/ZXYK4LljnT0?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Quentin Kemmel</a> on <a href="http://web.archive.org/web/20220924170138/https://unsplash.com/search/photos/hubble-telescope?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a> </span></p></span></div>    
</body>
</html>