<html>
<head>
<title>How to Implement Android Notifications in Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Rails中实现Android通知</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/how-to-implement-android-notifications-in-rails#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/how-to-implement-android-notifications-in-rails#0001-01-01</a></blockquote><div><div id="hs_cos_wrapper_post_body"><span><div class="blog-post__lead h3"><p>移动通知是你的应用程序的一大特色——尤其是当你集成了移动和桌面解决方案的时候。下面是如何在Ruby on Rails项目中设置Android通知的快速指南。</p></div><p> </p>
<p>我假设你的应用程序中有某种类型的用户标识。你正在使用设计宝石。</p>
<p>您将使用的内容:</p>
<h2><a href="http://web.archive.org/web/20220927120300/https://github.com/spacialdb/gcm">https://github.com/spacialdb/gcm</a>-一个围绕谷歌云消息API (GCM)的简单包装器，</h2>
<ul>
<li>android项目id和API key——可以在这里获得<a target="_blank" href="http://web.archive.org/web/20220927120300/https://developers.google.com/cloud-messaging/#create-proj" rel="noopener">，</a></li>
<li>一些android应用程序注册到GCM，并将注册id发送到后端API。</li>
<li>优点:</li>
</ul>
<h3>实现起来非常简单——不需要魔法，</h3>
<ul>
<li>小型库——179行代码，</li>
<li>利用谷歌云信息，</li>
<li>安卓和iOS都可以用(我们只测试了安卓)。</li>
<li>缺点:</li>
</ul>
<h3>如果您需要非常低的延迟，Google Cloud Messaging可能不适合您——参见<a target="_blank" href="http://web.archive.org/web/20220927120300/https://www.facebook.com/notes/facebook-engineering/building-facebook-messenger/10150259350998920" rel="noopener"> Messenger案例研究</a>。</h3>
<ul>
<li>第一步</li>
</ul>
<p>添加到Gemfile:</p>
<h3>并运行<span> bundle install。</span></h3>
<p>第二步</p>
<pre>gem ‘gcm’</pre>
<p>将API密钥添加到<span> sec-config.yml </span>:</p>
<p>第三步</p>
<h3>现在，我们可以利用GCM发送一些通知。在下面的代码片段中，您可以找到一些示例服务对象，它们接受注册id(需要由移动客户端推送到您的后端API)和一个消息散列，该消息散列只是一个将包含在通知中的消息。</h3>
<p>[片段]</p>
<pre>environment:<br/>  google_gcm_api: some1cool1key1here</pre>
<p>第四步</p>
<h3>Android客户端需要使用广播接收器来监听这些通知。它将如何处理这些通知取决于您的应用程序的业务逻辑。这种应用的示例代码可以在<a target="_blank" href="http://web.archive.org/web/20220927120300/https://github.com/googlesamples/google-services/tree/master/android/gcm" rel="noopener">这里</a>找到。<br/> <br/>希望你喜欢！如果您有任何意见或想法如何改善它，请在下面分享。</h3>
<p>Now, we can make use of GCM and send some notifications. In the snippet below, you can find some example service object that takes registration IDs (that need to be pushed by mobile clients to your backend API) and a message hash which is just a message that will be included in the notification.</p>
<p data-gist-id="3806d3077435706913ff">[snippet]</p>
<h3>Step 4</h3>
<p>Android clients need to listen to those notifications by using the broadcast receiver. What it will do with those notifications will depend on the business logic of your application. A sample code for such an application can be found <a target="_blank" href="http://web.archive.org/web/20220927120300/https://github.com/googlesamples/google-services/tree/master/android/gcm" rel="noopener">here</a>.<br/><br/>I hope you like it! If you have any comments or ideas how to improve it, please share them below.</p></span></div></div>    
</body>
</html>