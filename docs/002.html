<html>
<head>
<title>Build React Native Layouts Without Margins With Stacks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用堆栈构建无边距的React本机布局</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/react-native-layouts-without-margins-with-stacks#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/react-native-layouts-without-margins-with-stacks#0001-01-01</a></blockquote><div><span><div class="blog-post__lead h3"><p>现在世界上每个人都有手机，每个手机的尺寸都不一样。这对开发人员和设计人员来说是个大问题，因为他们必须为所有屏幕尺寸提供完美的UI。幸运的是，我们有很多工具来解决这个问题——其中之一就是Stacks库。</p></div><span/><a href="http://web.archive.org/web/20221209132440/https://github.com/mobily/stacks">Stacks</a><span> helps us create a responsive layout easily without using margins. Margins are considered bad because they break component encapsulation and make reusability harder. If you want to learn more about margins, </span><a href="http://web.archive.org/web/20221209132440/https://mxstbr.com/thoughts/margin/">check out this interesting article</a><span>. The Stacks library is built in </span><strong>ReScript</strong><span>. ReScript compiles to JavaScript which means that Stacks can be used in projects written in TypeScript, Flow, and ReScript.</span><p/>
<p>堆栈库基于间隔组件。间隔组件是将管理子组件位置的责任转移到父组件的组件。间隔组件的工作方式与<strong>柔性盒</strong>相似。我们把正确的道具传给家长，然后孩子会相应地改变位置。</p>
<p>该库包含许多布局组件，其中一些是<strong>堆栈</strong>、<strong>图块</strong>、<strong>框</strong>、<strong>列</strong>和<strong>列</strong>。为了使用这些组件，你必须将<strong>主组件之一</strong>放在组件树的<strong>顶端</strong>。<strong> Grid </strong>和<strong>stack provider</strong>是定义在创建应用布局时要使用哪些选项的主要组件。该库还包含一些有用的钩子，例如，<strong> useCurrentBreakpoint </strong>返回安装该应用的设备类型，<strong> useWindowDimensions </strong>返回一个具有屏幕宽度和高度属性的对象。</p>
<pre><code class="hljs cpp"> <span class="hljs-keyword">const</span> breakpoint = <span class="hljs-built_in">useCurrentBreakpoint</span>();</code><br/><br/><code class="hljs coffeescript"> const isItemHorizontal = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {</code><br/><code class="hljs kotlin">   <span class="hljs-keyword">return</span> breakpoint === <span class="hljs-string">'tablet'</span>;</code><br/><code class="hljs"> };</code></pre>
<p data-style-text-align-center=""><strong>使用当前断点示例</strong></p>
<h3>React本机布局教程</h3>
<p>这是一个简单的React本地应用 ，演示了Stacks库的基本用法。这是一个电影应用程序，显示当前最受欢迎的电影。</p>
<div data-style-text-align-center=""><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221209132440im_/https://lh5.googleusercontent.com/Ao79p-MqHrMcu3T4fjmxRN5XWSXn_yPGilaPHDkGTfZ0rjak7Bck8zF8iw-1HRQq7_W0BYX86P5wxojnNgvHQKj55EK0c9biLkcmU0C3fYctYeHcNyFn1XKtkymFepb610UGgl_O 273w, http://web.archive.org/web/20221209132440im_/https://lh5.googleusercontent.com/Ao79p-MqHrMcu3T4fjmxRN5XWSXn_yPGilaPHDkGTfZ0rjak7Bck8zF8iw-1HRQq7_W0BYX86P5wxojnNgvHQKj55EK0c9biLkcmU0C3fYctYeHcNyFn1XKtkymFepb610UGgl_O 546w" src="../Images/64a06c30a7212c2ac23a725b2675e9b1.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221209132440im_/https://lh5.googleusercontent.com/Ao79p-MqHrMcu3T4fjmxRN5XWSXn_yPGilaPHDkGTfZ0rjak7Bck8zF8iw-1HRQq7_W0BYX86P5wxojnNgvHQKj55EK0c9biLkcmU0C3fYctYeHcNyFn1XKtkymFepb610UGgl_O"/>
  </figure><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221209132440im_/https://lh5.googleusercontent.com/dvUvMWRcfTTvKADGikjshSefwtaTd53DREu1FvG0lF7UWJvfXZh4UyhIrt41EBZVysg1g9gVyAo5KHDZmlXiffyT7ZdzUUkOWKm4ErqRdAPwHpNfiZDho_WkxiD0nQIX8QvPgYl7 263w, http://web.archive.org/web/20221209132440im_/https://lh5.googleusercontent.com/dvUvMWRcfTTvKADGikjshSefwtaTd53DREu1FvG0lF7UWJvfXZh4UyhIrt41EBZVysg1g9gVyAo5KHDZmlXiffyT7ZdzUUkOWKm4ErqRdAPwHpNfiZDho_WkxiD0nQIX8QvPgYl7 526w" src="../Images/de8b80c116ba3c6b1f7342fa388ddfa5.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221209132440im_/https://lh5.googleusercontent.com/dvUvMWRcfTTvKADGikjshSefwtaTd53DREu1FvG0lF7UWJvfXZh4UyhIrt41EBZVysg1g9gVyAo5KHDZmlXiffyT7ZdzUUkOWKm4ErqRdAPwHpNfiZDho_WkxiD0nQIX8QvPgYl7"/>
  </figure><strong>HomeScreen and DetailsScreen on a mobile phone</strong></div>
<p> </p>
<p> </p>
<p data-style-text-align-center=""/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221209132440im_/https://lh6.googleusercontent.com/qPdAupM2aqupV8tgiifA6L97LujKprAr8NFYsDHwrvyzl2Hq7wz0hsGM-t3EbBRMjjO8Ki8gtiGnFzmC1Qd5js9lMsbRtLXjV3ZhFjx1yyf1AtF_7z8XvNnhzz0WmWzlVknDFS6W 297w, http://web.archive.org/web/20221209132440im_/https://lh6.googleusercontent.com/qPdAupM2aqupV8tgiifA6L97LujKprAr8NFYsDHwrvyzl2Hq7wz0hsGM-t3EbBRMjjO8Ki8gtiGnFzmC1Qd5js9lMsbRtLXjV3ZhFjx1yyf1AtF_7z8XvNnhzz0WmWzlVknDFS6W 594w" src="../Images/d8a34f3f2c5473ea809097e4c160ed87.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221209132440im_/https://lh6.googleusercontent.com/qPdAupM2aqupV8tgiifA6L97LujKprAr8NFYsDHwrvyzl2Hq7wz0hsGM-t3EbBRMjjO8Ki8gtiGnFzmC1Qd5js9lMsbRtLXjV3ZhFjx1yyf1AtF_7z8XvNnhzz0WmWzlVknDFS6W"/>
  </figure><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221209132440im_/https://lh3.googleusercontent.com/y-7V7BkjoUEfc_E2ODH8wx5rTO2PfgFIFc0P4HS6AqlRH547XTN7a15fUqI_H96tuNT9JR-PRRpU4nrrPYV7epHjRakRXNdhPyMH02X_eUM9VKR3kMj-EMtJgVZxLwYjvQb8h_XZ 298w, http://web.archive.org/web/20221209132440im_/https://lh3.googleusercontent.com/y-7V7BkjoUEfc_E2ODH8wx5rTO2PfgFIFc0P4HS6AqlRH547XTN7a15fUqI_H96tuNT9JR-PRRpU4nrrPYV7epHjRakRXNdhPyMH02X_eUM9VKR3kMj-EMtJgVZxLwYjvQb8h_XZ 596w" src="../Images/8a1fa1fa8722ccd9f545611ca9214049.png" alt="" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221209132440im_/https://lh3.googleusercontent.com/y-7V7BkjoUEfc_E2ODH8wx5rTO2PfgFIFc0P4HS6AqlRH547XTN7a15fUqI_H96tuNT9JR-PRRpU4nrrPYV7epHjRakRXNdhPyMH02X_eUM9VKR3kMj-EMtJgVZxLwYjvQb8h_XZ"/>
  </figure><p/>
<p data-style-text-align-center=""> </p>
<p data-style-text-align-center=""><strong>平板电脑上的主屏幕和详细信息屏幕</strong></p>
<p> </p>
<p>这是应用程序的布局。它由两个屏幕组成——第一个屏幕显示电影列表，而第二个屏幕显示T2电影的详细信息。请看一下<strong>的stack provider</strong>组件。它被添加到我们的组件树的根中。它使用定义子组件默认间距的间距属性。<span/></p>
<pre><code class="hljs xml">   <span class="hljs-tag">&lt;<span class="hljs-name">StacksProvider</span> <span class="hljs-attr">spacing</span>=<span class="hljs-string">{2}</span>&gt;</span></code><br/><code class="hljs apache">     <span class="hljs-section">&lt;AppNavigator /&gt;</span></code><br/><code class="hljs apache">   <span class="hljs-section">&lt;/StacksProvider&gt;</span></code></pre>
<p data-style-text-align-center=""><strong> App.js </strong></p>
<p data-style-text-align-center=""><strong> AppNavigator </strong></p>
<pre><code class="hljs apache">   <span class="hljs-section">&lt;NavigationContainer&gt;</span></code><br/><code class="hljs xml">     <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Navigator</span> <span class="hljs-attr">initialRouteName</span>=<span class="hljs-string">{SCREENS.home}</span>&gt;</span></code><br/><code class="hljs">       &lt;Stack.Screen</code><br/><code class="hljs ini">         options=</code><br/><code class="hljs ini">         <span class="hljs-attr">name</span>={SCREENS.home}</code><br/><code class="hljs ini">         <span class="hljs-attr">component</span>={HomeScreen}</code><br/><code class="hljs">       /&gt;</code><br/><code class="hljs xml">       <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{SCREENS.details}</span> <span class="hljs-attr">component</span>=<span class="hljs-string">{DetailsScreen}</span> /&gt;</span></code><br/><code class="hljs apache">     <span class="hljs-section">&lt;/Stack.Navigator&gt;</span></code><br/><code class="hljs apache">   <span class="hljs-section">&lt;/NavigationContainer&gt;</span></code></pre>
<p data-style-text-align-center="">主屏幕</p>
<h3><a href="http://web.archive.org/web/20221209132440/https://github.com/imariic/TestStacks/blob/main/src/screens/HomeScreen.js"> <strong> <span>主屏</span> </strong> </a>有两个组件——<a href="http://web.archive.org/web/20221209132440/https://github.com/imariic/TestStacks/blob/main/src/components/MainMovie.js"><strong><span>主电影</span> </strong> </a>和<a href="http://web.archive.org/web/20221209132440/https://github.com/imariic/TestStacks/blob/main/src/components/MoviesScroll.js"> <strong> <span>电影滚动</span> </strong> </a>。MainMovie中的根元素是Stack。Stack用于水平或垂直排列子组件。通过指定<strong> space </strong> props，您可以计算子元素之间的距离。距离是这样计算的:<strong>间距*空间</strong>。在这种情况下，距离是4*4 = 16。</h3>
<p><strong>main movie . js<br/>T2<br/>T4】</strong></p>
<pre><code class="hljs xml">   <span class="hljs-tag">&lt;<span class="hljs-name">Stack</span> <span class="hljs-attr">space</span>=<span class="hljs-string">{4}</span> <span class="hljs-attr">align</span>=<span class="hljs-string">"center"</span> <span class="hljs-attr">paddingTop</span>=<span class="hljs-string">{5}</span>&gt;</span></code><br/><code class="hljs">     &lt;Image</code><br/><code class="hljs ini">       <span class="hljs-attr">style</span>={resolveStyle(styles.tabletImage, styles.mobileImage)}</code><br/><code class="hljs bash">       <span class="hljs-built_in">source</span>={<span class="hljs-built_in">source</span>}</code><br/><code class="hljs ini">       <span class="hljs-attr">resizeMode</span>=<span class="hljs-string">"stretch"</span></code><br/><code class="hljs">     /&gt;</code><br/><code class="hljs xml">     <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{resolveStyle(styles.tabletTitle,</span> <span class="hljs-attr">styles.mobileTitle</span>)}&gt;</span></code><br/><code class="hljs">       {title}</code><br/><code class="hljs apache">     <span class="hljs-section">&lt;/Text&gt;</span></code><br/><code class="hljs xml">     <span class="hljs-tag">&lt;<span class="hljs-name">Text</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{resolveStyle(styles.tabletRating,</span> <span class="hljs-attr">styles.mobileRating</span>)}&gt;</span></code><br/><code class="hljs">       {vote_average}/10</code><br/><code class="hljs apache">     <span class="hljs-section">&lt;/Text&gt;</span></code><br/><code class="hljs apache">   <span class="hljs-section">&lt;/Stack&gt;</span></code></pre>
<p data-style-text-align-center=""><a href="http://web.archive.org/web/20221209132440/https://github.com/imariic/TestStacks/blob/main/src/components/MoviesScroll.js"><strong><span>movie scroll</span></strong></a>是一个非常有趣的组件，因为它在每种设备类型上都有不同的表现。在手机上，组件将垂直呈现，但在平板电脑上是水平呈现。该组件包含行为与<strong>视图</strong>相同的<strong>框</strong>组件。值得一提的是，Stack接受一组值来确定对齐方式。数组的第一个值将应用于手机，第二个值将应用于平板电脑。通过这种方式，您可以实现快速响应。</p>
<p><strong>电影角色。js </strong></p>
<pre><code class="hljs xml">   <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">padding</span>=<span class="hljs-string">{2}</span>&gt;</span></code><br/><code class="hljs">     &lt;ScrollView</code><br/><code class="hljs ini">       <span class="hljs-attr">horizontal</span>={isItemHorizontal()}</code><br/><code class="hljs ini">       <span class="hljs-attr">showsHorizontalScrollIndicator</span>={<span class="hljs-literal">false</span>}</code><br/><code class="hljs ini">       <span class="hljs-attr">showsVerticalScrollIndicator</span>={<span class="hljs-literal">false</span>}&gt;</code><br/><code class="hljs">       &lt;Stack</code><br/><code class="hljs ini">         <span class="hljs-attr">align</span>={[<span class="hljs-string">'center'</span>, <span class="hljs-string">'stretch'</span>]}</code><br/><code class="hljs ini">         <span class="hljs-attr">space</span>={<span class="hljs-number">2</span>}</code><br/><code class="hljs ini">         <span class="hljs-attr">horizontal</span>={isItemHorizontal()}&gt;</code><br/><code class="hljs less">         {<span class="hljs-selector-tag">constructMoviesList</span>()}</code><br/><code class="hljs apache">       <span class="hljs-section">&lt;/Stack&gt;</span></code><br/><code class="hljs apache">     <span class="hljs-section">&lt;/ScrollView&gt;</span></code><br/><br/><code class="hljs apache">   <span class="hljs-section">&lt;/Box&gt;</span></code></pre>
<p data-style-text-align-center="">详细信息屏幕</p>
<p><a href="http://web.archive.org/web/20221209132440/https://github.com/imariic/TestStacks/blob/main/src/screens/DetailsScreen.js"> <strong> <span>细节画面</span> </strong> </a>只有一个组件——<a href="http://web.archive.org/web/20221209132440/https://github.com/imariic/TestStacks/blob/main/src/components/MovieDetails.js"><strong><span>movie details</span></strong></a>。如果我们点击一部电影，细节屏幕就会打开。使用堆栈提供的<strong>行</strong>和<strong>行</strong>组件构建MovieDetails布局。行也是一个<strong>间隔组件</strong>。行和列用于垂直对齐项目<strong>和</strong>。堆栈和行非常相似，只是行不能水平对齐。</p>
<h3><code>   &lt;ScrollView&gt;</code></h3>
<p><code>     &lt;Rows space={4} alignX={['center']} paddingTop={4}&gt;</code></p>
<p><code>       &lt;Row width="content" padding={3}&gt;</code></p>
<p><code>         &lt;Text style={titleStyle}&gt;{title}&lt;/Text&gt;</code></p>
<p><code>         &lt;Text style={descriptionStyle}&gt;{overview}&lt;/Text&gt;</code></p>
<p><code>       &lt;/Row&gt;</code></p>
<p><code>       &lt;Row width="content"&gt;</code></p>
<p><code>         &lt;Image</code></p>
<p><code>           resizeMode="stretch"</code></p>
<p><code>           style={imageStyle}</code></p>
<p><code>           source={generateImageSource(poster_path)}</code></p>
<p><code>         /&gt;</code></p>
<p><code>       &lt;/Row&gt;</code></p>
<p><code>       &lt;Row width="content"&gt;</code></p>
<p><code>         &lt;Text style={releaseDateAndRatingStyle}&gt;</code></p>
<p><code>           Release date: {release_date}</code></p>
<p><code>         &lt;/Text&gt;</code></p>
<p><code>       &lt;/Row&gt;</code></p>
<p><code>       &lt;Row width="content"&gt;</code></p>
<p><code>         &lt;Text style={releaseDateAndRatingStyle}&gt;Rating: {vote_average}&lt;/Text&gt;</code></p>
<p><code>       &lt;/Row&gt;</code></p>
<p><code>     &lt;/Rows&gt;</code></p>
<p><code>   &lt;/ScrollView&gt;</code></p>
<p><strong> MovieDetails.js </strong></p>
<p>结论</p>
<pre>   &lt;ScrollView&gt;<br/>     &lt;Rows space={4} alignX={['center']} paddingTop={4}&gt;<br/>       &lt;Row width="content" padding={3}&gt;<br/>         &lt;Text style={titleStyle}&gt;{title}&lt;/Text&gt;<br/>         &lt;Text style={descriptionStyle}&gt;{overview}&lt;/Text&gt;<br/>       &lt;/Row&gt;<br/>       &lt;Row width="content"&gt;<br/>         &lt;Image<br/>           resizeMode="stretch"<br/>           style={imageStyle}<br/>           source={generateImageSource(poster_path)}<br/>         /&gt;<br/>       &lt;/Row&gt;<br/>       &lt;Row width="content"&gt;<br/>         &lt;Text style={releaseDateAndRatingStyle}&gt;<br/>           Release date: {release_date}<br/>         &lt;/Text&gt;<br/>       &lt;/Row&gt;<br/>       &lt;Row width="content"&gt;<br/>         &lt;Text style={releaseDateAndRatingStyle}&gt;Rating: {vote_average}&lt;/Text&gt;<br/>       &lt;/Row&gt;<br/>     &lt;/Rows&gt;<br/>   &lt;/ScrollView&gt;</pre>
<p data-style-text-align-center="">Stacks是一个非常有趣的库，是在React Native中构建布局的新方法。这使得开发更容易，因为你绝对不需要使用保证金。然而，库<strong>并不完美</strong>，因为useCurrentBreakpoint在iOS上无法工作。此外，该库没有使字体大小响应的选项，所以您必须手动完成</p>
<h3>Conclusion</h3>
<p>Stacks is a very interesting library and a new way to build layouts in React Native. It makes the development easier because you absolutely do not need to use margins. However, the library <strong>is not perfect</strong> because useCurrentBreakpoint does not work on iOS. Also, the library does not have an option to make font sizes responsive so you have to do that manually</p></span></div>    
</body>
</html>