<html>
<head>
<title>Use Jetpack Navigation in the Android Application Design Process</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在Android应用程序设计过程中使用Jetpack导航</h1>
<blockquote>原文：<a href="http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/use-navigation-from-jetpack-in-the-android-application-design-process#0001-01-01">http://web.archive.org/web/20230307163032/https://www.netguru.com/blog/use-navigation-from-jetpack-in-the-android-application-design-process#0001-01-01</a></blockquote><div><div id="hs_cos_wrapper_post_body"><span><div class="blog-post__lead h2"><p>Android应用程序设计问题</p><p>在开发Android应用程序的过程中，我必须实现一个定制设计系统，其中:</p></div><ul>
<li>
<p>需要从DeepLink打开屏幕。</p>
</li>
<li>
<p><span/> <span>仪表盘屏幕有几个按钮可以打开其他屏幕。</span></p>
</li>
<li>
<p><span/> <span>带工具栏的屏幕包含一个关闭当前屏幕的右键。</span></p>
</li>
<li>
<p><span/> <span>屏幕只有一个向左返回的箭头按钮，让你回到上一个屏幕(像在iOS中一样)。</span></p>
</li>
<li>
<p><span/> <span>屏幕包含上述两个按钮。</span></p>
</li>
<li>
<p>UX设计项目包含一百多个屏幕。</p>
</li>
</ul>
<p><span/> <span/> <span>作为一名Android开发者，我首先考虑的是:</span></p>
<ul>
<li>
<p><span/> <span/> <span>如何在应用中实现导航？</span></p>
</li>
<li>
<p><span>用户从DeepLink打开应用时，如何实现导航？</span></p>
</li>
<li>
<p><span>UX设计是否涵盖了所有可能的应用工作流程？</span></p>
</li>
<li>
<p>从用户的角度来看，UX的设计是否高效？</p>
</li>
</ul>
<p><span/> <span/> <span>回答第一个问题，我开发了类似NavigationHelper或者Navigator类的东西来管理活动中片段之间的导航。该类的对象需要活动上下文来启动另一个活动或FragmentManager来管理活动内部的片段。但是这个对象解决了来自DeepLink的导航吗？为了捕获一个深度链接，我们需要实现以下内容:</span></p>
<ul>
<li>
<p><span/> <span/> <span>在你的货单里设置一个合适的&lt;意向过滤器&gt;作为入口点。</span></p>
</li>
<li>
<p><span>考虑为目标活动设置android:launchMode="singleTask "以避免同时运行您的活动的多个副本。</span></p>
</li>
<li>
<p><span>处理意图。</span></p>
</li>
<li>
<p><span>将深度链接与预定义的正则表达式相匹配，以将用户导航至正确的页面/内容。</span></p>
</li>
</ul>
<p><span/> <span/> <span>接下来我面临的问题是:</span></p>
<ul>
<li>
<p><span/> <span/> <span>低效的用户界面流程(例如，在应用程序中做某件事需要太多的点击，在应用程序的某个地方需要浏览太多的屏幕等等。)</span></p>
</li>
<li>
<p><span>缺少或不完整的应用程序工作流路径。</span></p>
</li>
</ul>
<p><span/> <span/> <span>这两个问题都是UX设计问题，需要在开发商发现存在后，与UX设计师一起解决。为此，你不必联系另一家<a href="/web/20221004133318/https://www.netguru.com/services/ux-design" rel=" noopener" target="_blank"> UX设计机构</a>。Netguru会帮你做的。</span></p>
<h2>Jetpack的导航会有所帮助</h2>
<p><span/> <span/> <span>为了简化这些问题，谷歌在2018年5月的年度谷歌I/O活动上展示了来自Jetpack的导航。导航组件是“某种东西”,它让我们能够摆脱这些Android应用程序设计问题，或者至少将它们减少到最低限度。首先，导航组件是一个表示存储为XML文件的图形的对象。Android Studio提供了这个文件的v </span> <span>可视化来表示一个活动的导航流程。下面是一个在Android Studio中可视化的导航图的例子。</span></p>
<p/><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221004133318im_/https://www.netguru.com/hs-fs/hubfs/blog%201.png?width=700&amp;name=blog%201.png 700w, http://web.archive.org/web/20221004133318im_/https://www.netguru.com/hs-fs/hubfs/blog%201.png?width=2544&amp;name=blog%201.png 2544w" src="../Images/8d130996fafef300da159121fdd6944a.png" alt="blog 1" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221004133318im_/https://www.netguru.com/hs-fs/hubfs/blog%201.png?width=700&amp;name=blog%201.png"/>
  </figure><p/>
<p><span/> <span/> <span>上图中:</span></p>
<ul>
<li>
<p><span/> <span/> <span>图中所代表的片段都是目的地。</span></p>
</li>
<li>
<p>目的地通过动作连接。每个动作在导航图线中用一个箭头表示。箭头显示了我们从源到目的地的导航方向。</p>
</li>
</ul>
<p><span/> <span/> <span/> <span>如图所示，例如</span> <span> <em>设置片段</em> </span> <span>没有连接。工作流路径缺失或不完整。屏幕之间没有循环动作。上面的例子显示了在Android Studio中检查所有不完整的路径或低效的UI流是多么容易。导航组件简化了深度链接的处理。我必须处理来自其他应用程序的深层链接来触发特定的屏幕。导航组件在导航图中提供静态上下文。下面是一个片段，它定义了目的地的URL。在这个例子中，要传递的参数用花括号描述。</span></p>
<pre>&lt;fragment<br/>   android:id="@+id/android"<br/>   android:name="com.example.android.codelabs.navigation.DeepLinkFragment"<br/>   android:label="@string/deeplink"<br/>   tools:layout="@layout/deeplink_fragment"&gt;<br/><br/>   &lt;argument<br/>       android:name="myarg"<br/>       android:defaultValue="Android!"/&gt;<br/>   &lt;deepLink app:uri="www.example.com/{myarg}" /&gt;<br/>&lt;/fragment&gt;</pre>
<p class="p1"> </p>
<p><span/> <span/> <span>工具栏左右两边按钮的问题可以通过以下方式解决:</span></p>
<ul>
<li>
<p><span/> <span/> <span>对于带箭头的左键返回到上一个屏幕我们在下面呈现的Activity类中有回调方法:</span></p>
<pre><code class="language-java">override fun onSupportNavigateUp(): Boolean {
    return NavigationUI.navigateUp(drawerLayout,
           Navigation.findNavController(this, R.id.my_nav_host_fragment))
}
</code></pre>
</li>
</ul>

<p> </p>
<p><span/> <span/> <span>该项目的ID将在导航图中用于导航到该目的地。下面的代码片段显示了与上述商品ID相关的导航图的目的地部分。</span></p>
<pre><span><span>&lt;fragment<br/>   android:id="@+id/shopping_cart"<br/>   android:name="com.example.android.codelabs.navigation.CartFragment"<br/>   android:label="CartFragment"<br/>   tools:layout="@layout/cart_fragment" /&gt;</span></span></pre>
<h2><span> <span> <span/> <span>原型制作过程</span> </span> </span></h2>
<p><span> <span> <span> <span> <span/> <span>在使用导航组件时，我发现导航图形预览可以呈现布局的资源。为此，我必须将UX设计中的图像设置为每个片段布局的背景属性。</span></span></span></span>T10】</span></p>
<p><span><span><span><span/></span></span>T6】</span></p><figure class="image&#10;    &#10;    image--framed&#10;    " data-image="" data-component="image">
    <img class="image__content" srcset="http://web.archive.org/web/20221004133318im_/https://www.netguru.com/hs-fs/hubfs/blog%206.png?width=692&amp;name=blog%206.png 692w, http://web.archive.org/web/20221004133318im_/https://www.netguru.com/hs-fs/hubfs/blog%206.png?width=1384&amp;name=blog%206.png 1384w" src="../Images/b73db4c9432d2bb4458d71ca0d45de9f.png" alt="blog 6" loading="lazy" data-image-content="" data-original-src="http://web.archive.org/web/20221004133318im_/https://www.netguru.com/hs-fs/hubfs/blog%206.png?width=692&amp;name=blog%206.png"/>
  </figure></span><p/>
<p>最后，我在导航编辑器中获得顶级应用程序导航的用户流。在一个有超过一百个屏幕的应用程序中，避免迷路是非常有用的。完成原型的最后一步是处理来自所有目的地的按钮动作，使应用程序可点击。为此，我必须在布局中添加一个按钮(例如ImageView，button)，然后在源代码中应用onClick处理。下面的代码片段显示了如何从导航图中执行XML操作。</p>
<pre><code class="language-java">override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
    super.onViewCreated(view, savedInstanceState)

    view.findViewById<view>(R.id.next_button).setOnClickListener(
            Navigation.createNavigateOnClickListener(R.id.next_action)
    )
}
</view></code></pre>
<p><span/> <span/> <span/> <span>当这个过程在UX设计的所有屏幕上完成后，我就有了一个完全可点击的Android应用程序的原型。</span></p>
<h2><span> <span/> <span>总结</span> </span></h2>
<p><span/> <span/> <span>所描述的原型化过程可以视为Android应用开发的第一阶段。当一个Android开发者不得不处理一个导航乍一看并不直观的UX设计时，这个过程可以用来处理应用程序中的顶级导航。</span></p>
<p><span>优点</span> <span>和</span> <span>缺点</span></p>
<ul>
<li><span> <span/> <span/> <span>流程会根据UX设计</span> </span>显示应用工作流中缺少哪些路径</li>
<li><span> <span> <span/> <span>加快研发进程争取th </span> <span> e最小可行产品(MVP) </span> </span> </span></li>
<li><span> <span> <span> <span/> <span>原型顶层导航将展示它如何在真实设备上工作</span> </span> </span> </span></li>
<li><span> <span> <span> <span> <span/> <span>在导航编辑器</span> </span> </span> </span> </span>中轻松快速地更改动作及其转场属性</li>
</ul>
<ul>
<li><span> <span/> <span/> <span>从Jetpack导航可以将动作链接到一个活动的目的地。导航编辑器将只显示单个活动的应用程序工作流。</span> </span></li>
<li><span> <span> <span/> <span>导航编辑器不适用于通过工具栏执行源目的地布局和目标目的地布局之间的过渡的设计系统(从活动导航到活动)</span> </span> </span></li>
</ul>
<hr/>
<p><span>照片由<span> </span> </span> <a href="http://web.archive.org/web/20221004133318/https://unsplash.com/photos/qWwpHwip31M?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">阿尔瓦罗·雷耶斯</a> <span> <span> </span>上<span> </span> </span> <a href="http://web.archive.org/web/20221004133318/https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText"> Unsplash </a></p></div></div>    
</body>
</html>